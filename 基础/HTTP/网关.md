## 网关概念

HTTP 扩展和接口的发展是由用户需求驱动的。要在 Web 上发布更复杂资源的需求出现时，人们很快就明确了一点：单个应用程序无法处理所有这些能想到的资源。

为了解决这个问题，开发者提出了网关（gateway）的概念，网关可以作为某种翻译器使用，它抽象出了一种能够到达资源的方法。网关是资源和应用程序之间的粘合剂。应用程序可以（通过 HTTP 或其他已定义的接口）请求网关来处理某条请求，网关可以提供一条响应。网关可以向数据库发送查询语句，或者生成动态的内容，就像一个门一样：进去一条请求，出来一个响应。

有些网关会自动将HTTP流量转换为其它协议，这样HTTP客户端无需了解其它协议，就可以与其它应用程序进行交互了。

常见网关类型：

- 服务协议转换器
- 服务器端安全网关
- 客户端安全网关
- 应用程序服务器

## CGI

第一个流行的应用程序网关API就是通用网关接口CGI。CGI是一个标准接口集，web服务器可以用它来装载程序以响应对特定URL的HTTP请求，并收集程序的输出数据，将其放在HTTP响应中回送。

请求需要使用网关的资源时，服务器会请求辅助应用程序来处理请求。服务器会将辅助应用程序所需的数据传送给它。通常就是整条请求，或者用户想在数据库上运行的请求之类的东西。

然后，它会向服务器返回一条响应或相应数据，服务器则会将其转发给客户端。服务器和网关是相互独立的应用程序，因此，它们的责任是分的很清楚的。

这个简单的协议就是最古老、也是最常用的服务器扩展接口CGI的本质。

![](/static/images/2102/p002.png)

## fast CGI

为每条CGI请求引发一个新进程的开销是很高的，会限制那些使用CGI的服务器的性能，而且会加重服务端机器资源的负担。

为了解决这个问题，人们开发了一种新型CGI——将其恰当的称为快速CGI。这个接口模拟了CGI，但是它是作为持久守护进程运行的，消除了为每个请求建立或者拆除新进程所带来的性能消耗。

## 参考

- HTTP权威指南